<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AI Resume Ranker ‚Äî Smarter Hiring Starts Here</title>

<!-- Libraries -->
<script src="https://unpkg.com/jszip@3.10.1/dist/jszip.min.js"></script>
<script src="https://unpkg.com/mammoth@1.6.0/dist/mammoth.browser.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script>pdfjsLib.GlobalWorkerOptions.workerSrc='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root {
  --bg:#eef3ff; --card:#fff; --text:#0f1724; --muted:#5b6b87;
  --primary:#0056d6; --accent:#00c3ff;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:"Poppins",sans-serif;
  background:var(--bg);
  color:var(--text);
  padding:20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  overflow-x:hidden;
  transition:background .5s,color .5s;
}
.app{max-width:1100px;width:100%;position:relative;}

/* ======= HEADER AREA ======= */
header{
  position:relative;
  background:linear-gradient(135deg,rgba(0,86,214,0.15),rgba(0,195,255,0.15));
  border-radius:24px;
  padding:40px 30px 60px;
  margin-bottom:40px;
  overflow:hidden;
  box-shadow:0 6px 25px rgba(0,0,0,0.1);
  animation:fadeInUp 1s ease forwards;
}
header::before{
  content:"";
  position:absolute;
  top:-50%;left:-50%;
  width:200%;height:200%;
  background:conic-gradient(from 0deg,var(--primary),var(--accent),var(--primary));
  animation:rotateGlow 8s linear infinite;
  filter:blur(80px);
  opacity:.25;
  z-index:0;
}
@keyframes rotateGlow{
  0%{transform:rotate(0deg);}
  100%{transform:rotate(360deg);}
}

/* Brand */
.brand{
  display:flex;align-items:center;gap:16px;
  z-index:2;position:relative;
  animation:slideInLeft 1s ease forwards;
}
.logo{
  width:80px;height:80px;border-radius:20px;
  background:linear-gradient(135deg,var(--primary),var(--accent));
  display:flex;align-items:center;justify-content:center;
  color:white;font-size:28px;font-weight:700;
  box-shadow:0 0 25px var(--accent);
  animation:glowPulse 3s ease-in-out infinite;
}
@keyframes glowPulse{
  0%,100%{box-shadow:0 0 15px var(--accent);}
  50%{box-shadow:0 0 35px var(--accent);}
}
h1{
  margin:0;
  font-size:30px;
  background:linear-gradient(90deg,var(--primary),var(--accent));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:textGlow 3s ease-in-out infinite alternate;
}
@keyframes textGlow{
  from{filter:drop-shadow(0 0 4px var(--primary));}
  to{filter:drop-shadow(0 0 10px var(--accent));}
}

/* Header tagline */
header .tagline{
  font-size:15px;
  color:var(--muted);
  margin-top:6px;
  opacity:0;
  animation:fadeIn 1.5s ease 1s forwards;
}
@keyframes fadeIn{to{opacity:1;}}
@keyframes slideInLeft{
  0%{transform:translateX(-40px);opacity:0;}
  100%{transform:translateX(0);opacity:1;}
}
@keyframes fadeInUp{
  0%{transform:translateY(40px);opacity:0;}
  100%{transform:translateY(0);opacity:1;}
}

/* Floating icons */
.icon-float{
  position:absolute;
  width:40px;height:40px;
  background:rgba(0,195,255,0.2);
  border:1px solid rgba(0,195,255,0.4);
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  color:var(--primary);
  font-size:18px;
  animation:floatIcon 6s ease-in-out infinite;
  z-index:0;
  cursor:pointer;
  transition:transform .3s;
}
.icon-float:hover{transform:scale(1.2) rotate(10deg);}
.icon1{top:10%;left:15%;animation-delay:0s;}
.icon2{top:55%;left:80%;animation-delay:2s;}
.icon3{top:75%;left:35%;animation-delay:1s;}
.icon4{top:25%;left:70%;animation-delay:3s;}
@keyframes floatIcon{
  0%,100%{transform:translateY(0) rotate(0);}
  50%{transform:translateY(-15px) rotate(8deg);}
}

/* CTA Section */
.header-cta{
  margin-top:40px;
  display:flex;flex-direction:column;align-items:center;
  gap:20px;z-index:1;position:relative;
  animation:fadeInUp 1.2s ease 0.4s forwards;
}
.header-cta p{
  max-width:700px;text-align:center;color:var(--muted);
  font-size:15px;line-height:1.5;
}
.header-btn{
  background:linear-gradient(135deg,var(--primary),var(--accent));
  color:white;font-weight:600;
  border:none;border-radius:12px;
  padding:14px 28px;
  box-shadow:0 0 15px rgba(0,195,255,0.3);
  cursor:pointer;
  font-size:16px;
  position:relative;
  overflow:hidden;
  transition:transform .3s,box-shadow .3s;
}
.header-btn:hover{
  transform:scale(1.05);
  box-shadow:0 0 25px rgba(0,195,255,0.6);
}
.header-btn::after{
  content:"";
  position:absolute;
  top:0;left:-75%;
  width:50%;height:100%;
  background:linear-gradient(120deg,transparent,rgba(255,255,255,0.6),transparent);
  transform:skewX(-25deg);
  transition:left .8s;
}
.header-btn:hover::after{left:130%;}

/* Feature highlights */
.feature-strip{
  margin-top:30px;
  display:flex;flex-wrap:wrap;gap:15px;
  justify-content:center;
}
.feature{
  background:rgba(255,255,255,0.8);
  border-radius:12px;
  padding:10px 18px;
  font-size:14px;
  color:var(--text);
  box-shadow:0 0 10px rgba(0,0,0,0.05);
  transition:transform .3s,box-shadow .3s;
}
.feature:hover{
  transform:translateY(-4px) scale(1.05);
  box-shadow:0 0 15px rgba(0,195,255,0.4);
}

/* ========== MAIN PANEL ========== */
.panel{
  background:var(--card);padding:25px;border-radius:16px;
  box-shadow:0 4px 20px rgba(0,0,0,0.15);margin-bottom:25px;
  animation:fadeInUp 1.2s ease forwards;
}
label{font-weight:600;font-size:14px;display:block;margin-top:12px;margin-bottom:6px;}
textarea,input[type="file"]{
  width:100%;border-radius:10px;border:1px solid rgba(100,100,100,0.2);
  padding:10px;background:var(--card);color:var(--text);
}
textarea{resize:vertical;min-height:120px;}
button{
  border:none;border-radius:10px;padding:12px 18px;
  font-weight:600;cursor:pointer;transition:.3s;
}
.btn{
  background:linear-gradient(135deg,var(--primary),var(--accent));
  color:white;margin-top:15px;
  box-shadow:0 0 10px rgba(0,195,255,0.3);
  animation:buttonPulse 4s ease-in-out infinite;
}
.btn:hover{
  transform:translateY(-3px) scale(1.03);
  box-shadow:0 0 20px rgba(0,195,255,0.6);
}
@keyframes buttonPulse{
  0%,100%{filter:brightness(1);}
  50%{filter:brightness(1.3);}
}

/* Results */
.results{margin-top:20px;}
.result-card{
  background:var(--card);border-radius:10px;padding:12px 16px;margin-bottom:10px;
  display:flex;justify-content:space-between;align-items:center;
  border-left:5px solid var(--primary);
  animation:fadeUpCard 0.7s ease forwards;
  transition:all 0.3s ease;
}
@keyframes fadeUpCard{
  from{opacity:0;transform:translateY(30px);}
  to{opacity:1;transform:translateY(0);}
}
.result-card:hover{
  transform:translateY(-5px) scale(1.02);
  box-shadow:0 8px 20px rgba(0,86,214,0.2);
  border-left-color:var(--accent);
}

.progress-container{margin-top:15px;display:none;}
.progress-wrap{
  height:18px;background:rgba(0,0,0,0.1);border-radius:10px;overflow:hidden;
}
.progress-bar{
  width:0%;height:100%;
  background:linear-gradient(90deg,var(--primary),var(--accent));
  animation:scanmove 1.5s linear infinite;background-size:200% 100%;
}
@keyframes scanmove{0%{background-position:200% 0;}100%{background-position:-200% 0;}}
.progress-text{text-align:center;margin-top:8px;color:var(--muted);font-size:13px;}
footer{text-align:center;font-size:13px;color:var(--muted);margin-top:25px;}

/* AI overlay animation */
.ai-scan-overlay{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:radial-gradient(circle at 50% -20%,rgba(0,195,255,0.15),transparent 70%);
  pointer-events:none;z-index:999;opacity:0;transition:opacity .5s ease;
}
.ai-scan-overlay.active{opacity:1;animation:aiScanMove 4s linear infinite;}
@keyframes aiScanMove{
  0%{background-position:50% -30%;}
  50%{background-position:50% 120%;}
  100%{background-position:50% -30%;}
}
</style>
</head>

<body>
<div class="ai-scan-overlay" id="aiScan"></div>

<div class="app">
  <header>
    <div class="icon-float icon1">ü§ñ</div>
    <div class="icon-float icon2">üíº</div>
    <div class="icon-float icon3">‚ú®</div>
    <div class="icon-float icon4">üìä</div>

    <div class="brand">
      <div class="logo">AI</div>
      <div>
        <h1>AI Resume Ranker</h1>
        <div class="tagline">Smarter, Faster, and Fairer Hiring with Intelligent Resume Analysis</div>
      </div>
    </div>

    <div class="header-cta">
      <p>
        Upload multiple resumes and let AI instantly evaluate, score, and rank them 
        against your job description. Perfect for recruiters, HR professionals, and startups.
      </p>
            <div class="feature-strip">
        <div class="feature">‚ö° Instant AI Ranking</div>
        <div class="feature">üìÇ Supports PDF & DOCX</div>
        <div class="feature">üîç Keyword & Skill Match</div>
        <div class="feature">üìä Exportable Reports</div>
        <div class="feature">üåê 100% Real Time Processing</div>
      </div>
    </div>
  </header>

  <div class="panel">
    <label>Job Description</label>
    <textarea id="jobDesc" placeholder="Paste job description here..."></textarea>

    <label>Upload Resumes (PDF, DOCX, TXT)</label>
    <input type="file" id="resumeUpload" multiple accept=".pdf,.docx,.txt">

    <button id="analyzeBtn" class="btn">üöÄ Analyze & Rank</button>

    <div class="progress-container" id="progressContainer">
      <div class="progress-wrap"><div class="progress-bar" id="progressBar"></div></div>
      <div class="progress-text" id="progressText">Preparing...</div>
    </div>
  </div>

  <div class="results" id="results"></div>
  <div style="display:flex;gap:10px;margin-top:10px;">
    <button id="exportCSV" class="btn" style="display:none">üìÑ Export CSV</button>
    <button id="exportPDF" class="btn" style="display:none">üßæ Export PDF</button>
  </div>

  <footer>¬© 2025 AI Resume Ranker ‚Äî Crafted with ‚ù§Ô∏è for Smart Recruiters</footer>
</div>

<script>
/* ========== TEXT EXTRACTION FUNCTIONS ========== */
async function extractPDFText(file){
  try{
    const arr=await file.arrayBuffer();
    const pdf=await pdfjsLib.getDocument({data:arr}).promise;
    let text="";
    for(let i=1;i<=pdf.numPages;i++){
      const pg=await pdf.getPage(i);
      const cont=await pg.getTextContent();
      text+=cont.items.map(it=>it.str).join(" ")+" ";
    }
    return text;
  }catch(e){console.error("PDF error",e);return "";}
}
async function extractDOCXText(file){
  try{
    const arr=await file.arrayBuffer();
    const {value}=await mammoth.extractRawText({arrayBuffer:arr});
    if(value && value.trim().length>0) return value;
  }catch(e){console.warn("Mammoth failed, fallback:",e);}
  try{
    const zip=await JSZip.loadAsync(file);
    const xml=await zip.file("word/document.xml").async("string");
    const cleaned=xml.replace(/<[^>]+>/g," ");
    return cleaned;
  }catch(e){console.warn("JSZip fallback failed",e);}
  try{
    const reader=new FileReader();
    return await new Promise(resolve=>{
      reader.onload=()=>resolve(reader.result);
      reader.readAsText(file);
    });
  }catch(e){console.error("DOCX plain fallback failed",e);}
  return "";
}
async function extractTXTText(file){return await file.text();}
async function extractText(file){
  const n=file.name.toLowerCase();
  if(n.endsWith(".pdf"))return await extractPDFText(file);
  if(n.endsWith(".docx"))return await extractDOCXText(file);
  if(n.endsWith(".txt"))return await extractTXTText(file);
  return "";
}

/* ========== UTILITIES ========== */
function normalizeText(text){
  let cleaned=text.toLowerCase();
  cleaned=cleaned.replace(/([^a-z0-9\s])/g,' ');
  cleaned=cleaned.replace(/\s+/g,' ').trim();
  return cleaned;
}
function progress(p,msg){
  progressBar.style.width=p+"%";
  progressText.textContent=msg+" ("+p+"%)";
}

/* ========== SEMANTIC SCORING ========== */
function getPhrases(text){return text.split(/[.!?]/).map(s=>s.trim()).filter(Boolean);}
function jaccardSim(a,b){
  const sa=new Set(a.split(' ')), sb=new Set(b.split(' '));
  const inter=[...sa].filter(x=>sb.has(x)).length;
  const union=new Set([...sa,...sb]).size;
  return inter/Math.max(union,1);
}
function semanticScore(job,resume){
  const jobP=getPhrases(job), resP=getPhrases(resume);
  if(!jobP.length||!resP.length)return 0;
  let total=0;
  jobP.forEach(jp=>{
    let best=0;
    resP.forEach(rp=>{
      const sim=jaccardSim(jp,rp);
      if(sim>best)best=sim;
    });
    total+=best;
  });
  return total/jobP.length;
}

/* ========== MAIN FUNCTIONALITY ========== */
const jobDesc=document.getElementById("jobDesc"),
resumeUpload=document.getElementById("resumeUpload"),
resultsDiv=document.getElementById("results"),
progressBar=document.getElementById("progressBar"),
progressContainer=document.getElementById("progressContainer"),
progressText=document.getElementById("progressText"),
analyzeBtn=document.getElementById("analyzeBtn"),
exportCSV=document.getElementById("exportCSV"),
exportPDF=document.getElementById("exportPDF"),
aiScan=document
